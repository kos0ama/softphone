(this.webpackJsonpsoftphone=this.webpackJsonpsoftphone||[]).push([[0],{100:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),a=n(33),o=n.n(a),r=(n(99),n(17)),s=(n.p,n(100),n(134)),l=n(118),u=(n(101),n(52)),d=n(6),b=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)([]),o=Object(r.a)(a,2),b=o[0],j=o[1],f=Object(c.useState)([]),p=Object(r.a)(f,2),v=(p[0],p[1],Object(c.useState)([])),O=Object(r.a)(v,2),h=(O[0],O[1],Object(c.useState)([])),g=Object(r.a)(h,2),m=g[0],C=g[1],x=Object(c.useState)([]),S=Object(r.a)(x,2),N=S[0],B=S[1],y=Object(c.useState)([]),E=Object(r.a)(y,2),k=(E[0],E[1],Object(c.useState)(!1)),I=Object(r.a)(k,2),w=I[0],A=I[1],M=Object(c.useState)(!1),T=Object(r.a)(M,2),L=T[0],P=T[1],H=Object(c.useState)([{}]),D=Object(r.a)(H,2),U=D[0],F=D[1],z=Object(c.useRef)(null),J=Object(c.useRef)(null),R=Object(c.useState)(!1),G=Object(r.a)(R,2),W=G[0],Y=(G[1],Object(c.useState)(!1)),K=Object(r.a)(Y,2),V=K[0],_=K[1],q=Object(c.useState)(!1),Q=Object(r.a)(q,2),X=Q[0],Z=Q[1],$=Object(c.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useState)(!1),ie=Object(r.a)(ce,2),ae=ie[0],oe=ie[1],re=Object(c.useState)(""),se=Object(r.a)(re,2),le=se[0],ue=se[1],de=Object(c.useState)(""),be=Object(r.a)(de,2),je=be[0],fe=be[1],pe=(new Date).getTime(),ve=window.location.href,Oe=u.a.ApiClient.instance,he=new u.a.ConversationsApi,ge=new u.a.NotificationsApi,me=new u.a.UsersApi;Oe.setEnvironment("mypurecloud.jp"),Oe.setPersistSettings(!0,"test_app");var Ce,xe,Se,Ne,Be,ye,Ee={};function ke(e){var t=JSON.parse(e.data);switch(t.topicName.toLowerCase()){case"channel.metadata":return void console.info("Ignoring metadata: ",t);case xe.toLowerCase():return console.debug("Conversation notification: ",t),i(t.eventBody.id),console.debug("gcallId:",t.eventBody.id),j(t.eventBody.participants[0].id),console.debug("gparticipantId:",t.eventBody.participants[0].id),P(t.eventBody.participants[0].calls[0].held),console.debug("gheld:",t.eventBody.participants[0].calls[0].held),A(t.eventBody.participants[0].calls[0].muted),console.debug("gmuted:",t.eventBody.participants[0].calls[0].muted),C(t.eventBody.participants[0].calls[0].state),t.eventBody.participants.forEach((function(e){e.calls&&0!==e.calls.length&&(e.ani=e.calls[0].self.addressNormalized,e.attributes=e.additionalProperties,e.confined=e.calls[0].confined,e.direction=e.calls[0].direction,e.dnis=e.calls[0].other.addressNormalized,e.held=e.calls[0].held,e.muted=e.calls[0].muted,e.provider=e.calls[0].provider,e.recording=e.calls[0].recording,e.recordingState=e.calls[0].recordingState,e.state=e.calls[0].state,e.userId&&(e.user={id:e.userId,selfUri:"/api/v2/users/".concat(e.userId)}),e.calls[0].peerId&&(e.peer=e.calls[0].peerId))})),void(!function(e){var t=!1;return e.participants.some((function(e){if("disconnected"!==e.state)return t=!0,!0})),!t}(t.eventBody)?(Ee[t.eventBody.id]=t.eventBody,F(t.eventBody)):delete Ee[t.eventBody.id]);case Be.toLowerCase():return void console.debug("routingStatus notification: ",t);case Ne.toLowerCase():return console.debug("presence notification: ",t),void B(t.eventBody.presenceDefinition.systemPresence);default:return void console.warn("Unknown notification: ",t)}}Object(c.useEffect)((function(){Oe.loginImplicitGrant("d03eb90b-4753-4144-be08-da2890cfa679",ve,{state:pe}).then((function(e){return console.log("Logged in"),me.getUsersMe()})).then((function(e){return console.log("userMe: ",e),Ce=e,ge.postNotificationsChannels()})).then((function(e){console.log("channel: ",e),ye=e,new WebSocket(ye.connectUri).onmessage=ke,xe="v2.users."+Ce.id+".conversations",Se="v2.users."+Ce.id+".station",Ne="v2.users."+Ce.id+".presence",Be="v2.users."+Ce.id+".routingStatus";var t=[{id:xe},{id:Se},{id:Ne},{id:Be}];return ge.putNotificationsChannelSubscriptions(ye.id,t)})).catch((function(e){console.log(e)}))}),[]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[unlessCond]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f")}),[W]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[gisconnected]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f"),function(e,t){var n={state:"disconnected"};he.patchConversationsCallParticipant(e,t,n).then((function(){})).catch((function(e){return console.error(e)}))}(n,b)}),[V]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[muted]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f"),function(e,t,n){var c={muted:!n};he.patchConversationsCallParticipant(e,t,c).then((function(){})).catch((function(e){return console.error(e)}))}(n,b,w)}),[X]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[held]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f"),function(e,t,n){var c={held:!n};he.patchConversationsCallParticipant(e,t,c).then((function(){})).catch((function(e){return console.error(e)}))}(n,b,L)}),[te]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[isConsult]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f"),function(){console.debug(U);var e=n,t=b,c={speakTo:"destination",destination:{address:je}};he.postConversationsCallParticipantConsult(e,t,c).then((function(){})).catch((function(e){return console.error(e)}))}()}),[ae]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[gconversationList]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f"),console.log(U)}),[U]);return Object(d.jsx)("div",{className:"ui grid",children:Object(d.jsx)("div",{className:"ten wide column",children:Object(d.jsxs)("div",{className:"ui divided selection list",children:[Object(d.jsxs)("a",{className:"item",children:[Object(d.jsx)("div",{className:"ui large green horizontal label",children:"Info1 "}),Object(d.jsx)(s.a,{type:"text",id:"dialstring",placeholder:"3172222222",ref:z,val:le,onChange:function(e){return ue(e.target.value)}}),!1===V&&Object(d.jsx)(l.a,{inverted:!0,color:"green",id:"dial",onClick:function(){return function(){_(!0),z.current.focus();var e={phoneNumber:le};console.log(e),he.postConversationsCalls(e).then((function(){})).catch((function(e){return console.error(e)}))}()},children:"Dial"}),!0===V&&Object(d.jsx)(l.a,{inverted:!0,color:"red",onClick:function(){return _(!1)},children:"Disconnect"}),!0===V&&!1===X&&Object(d.jsx)(l.a,{inverted:!0,color:"green",onClick:function(){return Z(!0)},children:"Mute"}),!0===V&&!0===X&&Object(d.jsx)(l.a,{inverted:!0,color:"blue",onClick:function(){return Z(!1)},children:"unMute"}),!0===V&&!1===te&&Object(d.jsx)(l.a,{inverted:!0,color:"green",onClick:function(){return ne(!0)},children:"Hold"}),!0===V&&!0===te&&Object(d.jsx)(l.a,{inverted:!0,color:"blue",onClick:function(){return ne(!1)},children:"unHold"}),le,"disconnected"===m&&Object(d.jsx)("div",{className:"ui mini black circular label",children:m}),"terminated"===m&&Object(d.jsx)("div",{className:"ui mini grey circular label",children:m}),"dialing"===m&&Object(d.jsx)("div",{className:"ui mini red circular label",children:m}),"connected"===m&&Object(d.jsx)("div",{className:"ui mini blue circular label",children:m}),"AVAILABLE"===N&&Object(d.jsx)("div",{className:"ui mini green circular label",children:N}),"BUSY"===N&&Object(d.jsx)("div",{className:"ui mini red circular label",children:N}),"AWAY"===N&&Object(d.jsx)("div",{className:"ui mini pink circular label",children:N}),"BREAK"===N&&Object(d.jsx)("div",{className:"ui mini orange circular label",children:N}),"MEAL"===N&&Object(d.jsx)("div",{className:"ui mini orange circular label",children:N}),"MEETING"===N&&Object(d.jsx)("div",{className:"ui mini red circular label",children:N}),"TRAINING"===N&&Object(d.jsx)("div",{className:"ui mini orange circular label",children:N})]}),Object(d.jsxs)("a",{className:"item",children:[Object(d.jsx)("div",{className:"ui large green horizontal label",children:"Info2 "}),!0===V&&Object(d.jsx)(s.a,{type:"text",id:"newparticipant",placeholder:"3172222222",ref:J,val:je,onChange:function(e){return fe(e.target.value)}}),!0===V&&Object(d.jsx)(l.a,{inverted:!0,color:"purple",id:"Consult",onClick:function(){return oe("on")},children:"Consult"}),je,!0===V&&"on"===ae&&Object(d.jsx)(l.a,{inverted:!0,color:"purple",onClick:"consultSpeakTo('BOTH')",children:"Both"}),!0===V&&"on"===ae&&Object(d.jsx)(l.a,{inverted:!0,color:"purple",onClick:"consultSpeakTo('DESTINATION')",children:"Destination"}),!0===V&&"on"===ae&&Object(d.jsx)(l.a,{inverted:!0,color:"purple",onClick:"consultSpeakTo('OBJECT')",children:"First Party"}),!0===V&&"on"===ae&&Object(d.jsx)(l.a,{inverted:!0,color:"purple",onClick:function(){return oe("off")},children:"Consult off"})]})]})})})},j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,136)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),a(e),o(e)}))};o.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(b,{})}),document.getElementById("root")),j()},99:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.7567bff2.chunk.js.map