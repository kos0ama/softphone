(this.webpackJsonpsoftphone=this.webpackJsonpsoftphone||[]).push([[0],{100:function(e,t,n){},102:function(e,t,n){},119:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),a=n(26),o=n.n(a),r=(n(100),n(17)),s=n(84),l=n.n(s),d=(n.p,n(102),n(137)),u=n(120),b=(n(103),n(52)),j=n(5),f=function(){var e=l.a.parse(window.location.search),t=Object(c.useState)([]),n=Object(r.a)(t,2),i=n[0],a=n[1],o=Object(c.useState)([]),s=Object(r.a)(o,2),f=s[0],v=s[1],p=Object(c.useState)([]),O=Object(r.a)(p,2),h=(O[0],O[1],Object(c.useState)([])),g=Object(r.a)(h,2),m=(g[0],g[1],Object(c.useState)([])),C=Object(r.a)(m,2),x=C[0],N=C[1],S=Object(c.useState)([]),B=Object(r.a)(S,2),y=B[0],E=B[1],k=Object(c.useState)([]),I=Object(r.a)(k,2),w=(I[0],I[1],Object(c.useState)(!1)),A=Object(r.a)(w,2),M=A[0],T=A[1],L=Object(c.useState)(!1),P=Object(r.a)(L,2),H=P[0],D=P[1],U=Object(c.useState)([{}]),F=Object(r.a)(U,2),z=F[0],J=F[1],R=Object(c.useRef)(null),G=Object(c.useRef)(null),W=Object(c.useState)(!1),Y=Object(r.a)(W,2),K=Y[0],V=(Y[1],Object(c.useState)(!1)),_=Object(r.a)(V,2),q=_[0],Q=_[1],X=Object(c.useState)(!1),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)(!1),ne=Object(r.a)(te,2),ce=ne[0],ie=ne[1],ae=Object(c.useState)(!1),oe=Object(r.a)(ae,2),re=oe[0],se=oe[1],le=Object(c.useState)(""),de=Object(r.a)(le,2),ue=de[0],be=de[1],je=Object(c.useState)(""),fe=Object(r.a)(je,2),ve=fe[0],pe=fe[1],Oe=(new Date).getTime(),he=window.location.href,ge=b.a.ApiClient.instance,me=new b.a.ConversationsApi,Ce=new b.a.NotificationsApi,xe=new b.a.UsersApi;ge.setEnvironment("mypurecloud.jp"),ge.setPersistSettings(!0,"test_app");var Ne,Se,Be,ye,Ee,ke,Ie={};function we(e){var t=JSON.parse(e.data);switch(t.topicName.toLowerCase()){case"channel.metadata":return void console.info("Ignoring metadata: ",t);case Se.toLowerCase():return console.debug("Conversation notification: ",t),a(t.eventBody.id),console.debug("gcallId:",t.eventBody.id),v(t.eventBody.participants[0].id),console.debug("gparticipantId:",t.eventBody.participants[0].id),D(t.eventBody.participants[0].calls[0].held),console.debug("gheld:",t.eventBody.participants[0].calls[0].held),T(t.eventBody.participants[0].calls[0].muted),console.debug("gmuted:",t.eventBody.participants[0].calls[0].muted),N(t.eventBody.participants[0].calls[0].state),t.eventBody.participants.forEach((function(e){e.calls&&0!==e.calls.length&&(e.ani=e.calls[0].self.addressNormalized,e.attributes=e.additionalProperties,e.confined=e.calls[0].confined,e.direction=e.calls[0].direction,e.dnis=e.calls[0].other.addressNormalized,e.held=e.calls[0].held,e.muted=e.calls[0].muted,e.provider=e.calls[0].provider,e.recording=e.calls[0].recording,e.recordingState=e.calls[0].recordingState,e.state=e.calls[0].state,e.userId&&(e.user={id:e.userId,selfUri:"/api/v2/users/".concat(e.userId)}),e.calls[0].peerId&&(e.peer=e.calls[0].peerId))})),void(!function(e){var t=!1;return e.participants.some((function(e){if("disconnected"!==e.state)return t=!0,!0})),!t}(t.eventBody)?(Ie[t.eventBody.id]=t.eventBody,J(t.eventBody)):delete Ie[t.eventBody.id]);case Ee.toLowerCase():return void console.debug("routingStatus notification: ",t);case ye.toLowerCase():return console.debug("presence notification: ",t),void E(t.eventBody.presenceDefinition.systemPresence);default:return void console.warn("Unknown notification: ",t)}}Object(c.useEffect)((function(){ge.loginImplicitGrant("d03eb90b-4753-4144-be08-da2890cfa679",he,{state:Oe}).then((function(e){return console.log("Logged in"),xe.getUsersMe()})).then((function(e){return console.log("userMe: ",e),Ne=e,Ce.postNotificationsChannels()})).then((function(e){console.log("channel: ",e),ke=e,new WebSocket(ke.connectUri).onmessage=we,Se="v2.users."+Ne.id+".conversations",Be="v2.users."+Ne.id+".station",ye="v2.users."+Ne.id+".presence",Ee="v2.users."+Ne.id+".routingStatus";var t=[{id:Se},{id:Be},{id:ye},{id:Ee}];return Ce.putNotificationsChannelSubscriptions(ke.id,t)})).catch((function(e){console.log(e)}))}),[]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[unlessCond]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f")}),[K]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[gisconnected]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f"),function(e,t){var n={state:"disconnected"};me.patchConversationsCallParticipant(e,t,n).then((function(){})).catch((function(e){return console.error(e)}))}(i,f)}),[q]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[muted]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f"),function(e,t,n){var c={muted:!n};me.patchConversationsCallParticipant(e,t,c).then((function(){})).catch((function(e){return console.error(e)}))}(i,f,M)}),[$]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[held]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f"),function(e,t,n){var c={held:!n};me.patchConversationsCallParticipant(e,t,c).then((function(){})).catch((function(e){return console.error(e)}))}(i,f,H)}),[ce]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[isConsult]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f"),function(){console.debug(z);var e=i,t=f,n={speakTo:"destination",destination:{address:ve}};me.postConversationsCallParticipantConsult(e,t,n).then((function(){})).catch((function(e){return console.error(e)}))}()}),[re]),Object(c.useEffect)((function(){console.debug("MainHeader\u3067useEffect[gconversationList]\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f"),console.log(z)}),[z]);return Object(j.jsx)("div",{className:"ui grid",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"grey column",children:Object(j.jsxs)("div",{className:"ui divided selection list",children:[Object(j.jsxs)("a",{className:"item",children:[Object(j.jsx)("div",{className:"ui large green horizontal label",children:"Info1 "}),Object(j.jsx)(d.a,{type:"text",id:"dialstring",placeholder:"3172222222",ref:R,val:ue,onChange:function(e){return be(e.target.value)}}),e.callto&&Object(j.jsx)(u.a,{inverted:!0,color:"green",id:"callto",value:e.callto,onClick:function(){return document.getElementById("dialstring").value=document.getElementById("callto").value,void be(document.getElementById("callto").value)},children:e.callto}),!1===q&&Object(j.jsx)(u.a,{inverted:!0,color:"green",id:"dial",onClick:function(){return function(){Q(!0),R.current.focus();var e={phoneNumber:ue};console.log(e),me.postConversationsCalls(e).then((function(){})).catch((function(e){return console.error(e)}))}()},children:"Dial"}),!0===q&&Object(j.jsx)(u.a,{inverted:!0,color:"red",onClick:function(){return Q(!1)},children:"Disconnect"}),!0===q&&!1===$&&Object(j.jsx)(u.a,{inverted:!0,color:"green",onClick:function(){return ee(!0)},children:"Mute"}),!0===q&&!0===$&&Object(j.jsx)(u.a,{inverted:!0,color:"blue",onClick:function(){return ee(!1)},children:"unMute"}),!0===q&&!1===ce&&Object(j.jsx)(u.a,{inverted:!0,color:"green",onClick:function(){return ie(!0)},children:"Hold"}),!0===q&&!0===ce&&Object(j.jsx)(u.a,{inverted:!0,color:"blue",onClick:function(){return ie(!1)},children:"unHold"}),ue,"disconnected"===x&&Object(j.jsx)("div",{className:"ui mini black circular label",children:x}),"terminated"===x&&Object(j.jsx)("div",{className:"ui mini black circular label",children:x}),"dialing"===x&&Object(j.jsx)("div",{className:"ui mini red circular label",children:x}),"connected"===x&&Object(j.jsx)("div",{className:"ui mini blue circular label",children:x}),"AVAILABLE"===y&&Object(j.jsx)("div",{className:"ui mini green circular label",children:y}),"BUSY"===y&&Object(j.jsx)("div",{className:"ui mini red circular label",children:y}),"AWAY"===y&&Object(j.jsx)("div",{className:"ui mini pink circular label",children:y}),"BREAK"===y&&Object(j.jsx)("div",{className:"ui mini orange circular label",children:y}),"MEAL"===y&&Object(j.jsx)("div",{className:"ui mini orange circular label",children:y}),"MEETING"===y&&Object(j.jsx)("div",{className:"ui mini red circular label",children:y}),"TRAINING"===y&&Object(j.jsx)("div",{className:"ui mini orange circular label",children:y})]}),Object(j.jsxs)("a",{className:"item",children:[Object(j.jsx)("div",{className:"ui large green horizontal label",children:"Info2 "}),!0===q&&Object(j.jsx)(d.a,{type:"text",id:"newparticipant",placeholder:"3172222222",ref:G,val:ve,onChange:function(e){return pe(e.target.value)}}),!0===q&&Object(j.jsx)(u.a,{inverted:!0,color:"purple",id:"Consult",onClick:function(){return se("on")},children:"Consult"}),ve,!0===q&&"on"===re&&Object(j.jsx)(u.a,{inverted:!0,color:"purple",onClick:"consultSpeakTo('BOTH')",children:"Both"}),!0===q&&"on"===re&&Object(j.jsx)(u.a,{inverted:!0,color:"purple",onClick:"consultSpeakTo('DESTINATION')",children:"Destination"}),!0===q&&"on"===re&&Object(j.jsx)(u.a,{inverted:!0,color:"purple",onClick:"consultSpeakTo('OBJECT')",children:"First Party"}),!0===q&&"on"===re&&Object(j.jsx)(u.a,{inverted:!0,color:"purple",onClick:function(){return se("off")},children:"Consult off"})]})]})})})})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),a(e),o(e)}))};o.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(f,{})}),document.getElementById("root")),v()}},[[119,1,2]]]);
//# sourceMappingURL=main.ceccaf04.chunk.js.map